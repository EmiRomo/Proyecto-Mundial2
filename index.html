<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  </head>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: white;
    color: rgb(0, 0, 0);
    width: 100%;
    height: 100%;
    overflow-x: hidden;
  }
      
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  header {
    padding: 20px 0;
    margin-bottom: 30px;
    height: 90px;
    background-image: url('assets/targets/img-originales/header.png');
    background-size: cover;
    background-position: center 20%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    width: 100%;
  }
  
  .header-content {
    position: relative;
    z-index: 1;
    text-align: center;
    max-width: 1200px;
    width: 100%;
    padding: 0 20px;
  }
  
  .header-title {
    font-size: 2.5rem;
    margin: 0;
    color: rgb(0, 0, 0);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
  }
  
  .header-subtitle {
    font-size: 1.4rem;
    margin-top: 10px;
    color: #0270d6;
    font-weight: 300;
  }
  
  .logo {
    height: 100%; 
    display: flex;
    align-items: center;
  }
  
  .logo-img {
    height: 60px;
    width: auto; 
    max-width: 200px; 
  }
      
  .content-section {
    display: flex;
    flex: 1;
    gap: 40px;
    margin-bottom: 40px;
    flex-wrap: wrap;
  }
      
  .text-content {
      flex: 1;
      min-width: 300px;
  }
  
  .image-content {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-width: 300px;
  }
  
  .image-content img {
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  }
  
  h1 {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #000000;
  }
  
  p {
      line-height: 1.6;
      font-size: 1.1rem;
      margin-bottom: 15px;
      color: #000000;
  }
  
  .cta-section {
      text-align: center;
      margin-top: auto;
      padding: 30px 0;
  }
        
  .cta-text {
      font-size: 1.5rem;
      margin-bottom: 20px;
      color: #000000;
  }
        
  #startBtn {
    margin-top: 20px;
    padding: 20px;
    font-size: 1.2rem;
    border-radius: 10%;
    background: #fd2929;
    color: white;
    cursor: pointer;
    transition: background 0.3s;
    box-shadow: 0 5px 15px rgba(0, 191, 255, 0.4);
    width: 130px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
  }
        
  #startBtn:hover { 
    background: #04d662; 
  }

  .camera-icon {
    font-size: 2.5rem;
  }

  #ar-container {
    display: none;
    width: 100vw;
    height: 100vh;
    background: black;
    position: fixed;
    top: 0; left: 0;
    opacity: 0;
    transition: opacity 0.6s ease;
    z-index: 1;
  }
  
  #ar-container.active {
    display: block; 
    opacity: 1;
  }

  #buttons-panel {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: none;
    gap: 10px;
    z-index: 20;
  }

  #buttons-panel button {
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    border-radius: 6px;
    background: #9b9b9b;
    color: rgb(14, 14, 14);
    cursor: pointer;
  }

  #statsBox, #triviaBox {
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(241, 239, 239, 0.8);
    padding: 10px;
    border-radius: 8px;
    display: none;
    z-index: 25;
    max-width: 300px;
    text-align: center;
  }

  #triviaBox button {
    display: block;
    margin: 8px auto;
    padding: 8px 16px;
    font-size: 14px;
  }

  /* Ajustes para pantallas móviles */
  @media (max-width: 768px) {
    header {
      height: 30px; 
      background-position: left; 
    }

    .header-title {
      font-size: 2.5rem; /* título más chico */
    }

    .header-subtitle {
      font-size: 2.1rem;
    }

    h1 {
      font-size: 1.15rem;
    }

    p {
      font-size: 1rem;
    }

    .content-section {
      flex-direction: column; 
      gap: 20px;
    }

    .image-content img {
      max-width: 100%;
    }

    #statsBox, #triviaBox {
      top: auto; 
      bottom: 10%; 
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.65rem; 
      padding: 4px;
      width: 80%;       
      max-width: 380px;
      text-align: center; 
    }

    #triviaBox button {
      font-size: 12px;
      padding: 6px 12px;
    }
  }

  @media (max-width: 480px) {
    .header-title {
      font-size: 1.2rem;
    }

    .header-subtitle {
      font-size: 0.8rem;
    }

    #statsBox, #triviaBox {
      font-size: 0.6rem;
      padding: 10px;
      width: 90%;       
      max-width: 90%;
    }

    #triviaBox button {
      font-size: 11px;
      padding: 5px 10px;
    }
  }
</style>

<body>

  <header>
      <div id="intro" class="header-content"></div>
  </header>

  <div id="intro" class="container">
    <section class="content-section">
      <div class="text-content">
        <h1 class="header-title">Mundial 2026</h1>
        <p class="header-subtitle">Experiencia de Realidad Aumentada</p>
        <p>La Copa Mundial de la FIFA 2026 será un gran evento, con partidos en tres países: Estados Unidos, Canadá y México. Por primera vez, 48 equipos competirán por el trofeo más preciado del fútbol mundial.</p>
        <h1>¡Vive de otra forma del Mundial!</h1>
        <p>Descubre estadísticas, datos curiosos y la emoción del fútbol con nuestra experiencia de Realidad Aumentada. Escanea las banderas de los países participantes y desbloquea contenido exclusivo de cada selección.</p>
        <p>Con nuestra tecnología RA, podrás ver modelos 3D, videos destacados, unos filtros y resolver trivias interactivas sobre la historia de los mundiales.</p>
      </div>
      <div class="image-content">
        <img src="assets/targets/img-originales/estadios.jpg" alt="Estadio de fútbol">
      </div>
    </section>

    <section class="cta-section">
      <p class="cta-text">¡Prueba la experiencia del Mundial 2026!</p>
      <button id="startBtn"><i class="fas fa-camera camera-icon"></i></button>
    </section>
  </div>

  <div id="ar-container" class="ar-container"></div>

  <div id="buttons-panel" class="buttons-panel">
    <button id="btn1">Estadísticas</button>
    <button id="btn2">Video</button>
    <button id="btn3">Trivia</button>
    <button id="btn4">Animar</button>
  </div>

  <div id="statsBox" class="info-box" style="display:none;"></div>

  <div id="triviaBox" class="info-box">
    <p id="triviaQuestion"></p>
    <p id="triviaResult"></p>
  </div>


  <script>
    const startBtn = document.getElementById("startBtn");
    const intro = document.getElementById("intro");
    const arContainer = document.getElementById("ar-container");
    const buttonsPanel = document.getElementById("buttons-panel");
    const statsBox = document.getElementById("statsBox");
    
    const triviaBox = document.getElementById("triviaBox");
    const triviaQuestion = document.getElementById("triviaQuestion");
    const triviaResult = document.getElementById("triviaResult");

    const btn1 = document.getElementById("btn1");
    const btn2 = document.getElementById("btn2");
    const btn3 = document.getElementById("btn3");
    const btn4 = document.getElementById("btn4");

    const mainButtons = [btn1, btn2, btn3, btn4];
    const originalTexts = ["Estadísticas", "Video", "Trivia", "Modelo"];

    const countryData = {
      argentina: {
        stats: `
          <p>Mundiales Ganados: 3</p>
          <p>Puntos de clasificación: 18 Puntos</p>
          <p>Goles a Favor: 8</p>
          <p>Mejor Jugador Actual: Lionel Messi</p>
          `,
        trivia: {
          question: "¿Cuántos mundiales ha ganado Argentina?",
          options: ["2", "3", "4"],
          answer: "3"
        }
      },
      mexico: {
        stats: `
          <p>Mejor Participación: Cuartos de Final</p>
          <p>Puntos de clasificación: 14 Puntos</p>
          <p>Goles a favor: 20</p>
          <p>Mejor Jugador Actual: Edson Álvarez</p>
        `,
        trivia: {
          question: "¿En qué año México fue anfitrión del Mundial por primera vez?",
          options: ["1970", "1986", "2002"],
          answer: "1970"
        }
      },
      usa: {
        stats: `
          <p>Mejor Participación: Tercer Lugar</p>
          <p>Puntos de clasificación: 15 Puntos</p>
          <p>Goles a favor: 21</p>
          <p>Mejor Jugador Actual: Christian Pulisic</p>
          `,
        trivia: {
          question: "¿En qué año Estados Unidos fue anfitrión del Mundial?",
          options: ["1994", "2002", "2010"],
          answer: "1994"
        }
      },
      brasil: {
        stats: `
          <p>Mundiales Ganados: 5</p>
          <p>Puntos de clasificación: 8 Puntos</p>
          <p>Goles a Favor: 8</p>
          <p>Mejor Jugador Actual: Vinicius Jr.</p>
        `,
        trivia: {
          question: "¿Cuántos mundiales ha ganado Brasil?",
          options: ["3", "5", "7"],
          answer: "5"
        }
      }
      
    };

    let currentCountry = null;
    let triviaActive = false;
    
    //FUNCIONES 
    function resetButtons() {
      triviaActive = false;
      triviaBox.style.display = "none";

      mainButtons.forEach((btn, i) => {
        btn.style.display = "inline-block";
        btn.textContent = originalTexts[i];
        btn.onclick = mainButtonsLogic[i];
      });
    }

    // Estadísticas
    function showStats(country) {
      statsBox.innerHTML = countryData[country].stats;
      statsBox.style.display = "block";
      triviaBox.style.display = "none";

      mainButtons[0].style.display = "none";
      mainButtons[1].style.display = "none";
      mainButtons[2].style.display = "none";

      mainButtons[3].style.display = "inline-block";
      mainButtons[3].textContent = "Regresar";
      mainButtons[3].onclick = () => {
        statsBox.style.display = "none";
        resetButtons();
      };
    }

    // Video
    function showVideo(country) {
      const video = document.getElementById(`video-${country}`);
      const plane = document.getElementById(`plane-${country}`);
      if (!plane || !video) return;

      plane.setAttribute("visible", "true");
      video.currentTime = 0;
      video.muted = false;
      video.play().catch(err => console.log("⚠️ Error reproduciendo video:", err));

      mainButtons[0].style.display = "inline-block";
      mainButtons[0].textContent = "Filtro 1";
      mainButtons[0].onclick = () => applyFilter1(video);

      mainButtons[1].style.display = "inline-block";
      mainButtons[1].textContent = "Filtro 2";
      mainButtons[1].onclick = () => applyFilter2(video);

      mainButtons[2].style.display = "none"; 

      mainButtons[3].style.display = "inline-block";
      mainButtons[3].textContent = "Regresar";
      mainButtons[3].onclick = () => {
      plane.setAttribute("visible", "false");
      video.pause();
      resetButtons();
      };
    }

    // function applyFilter1(video) {
    //   console.log("Filtro 1 aplicado a", video.id);
    //   triviaResult.textContent = "🎛 Filtro 1 aplicado (simulado)";
    //   triviaResult.style.color = "yellow";
    //   triviaBox.style.display = "block"; // reuso el panel de trivia solo para mostrar mensajes
    // }

    // function applyFilter2(video) {
    //   console.log("Filtro 2 aplicado a", video.id);
    //   triviaResult.textContent = "🎛 Filtro 2 aplicado (simulado)";
    //   triviaResult.style.color = "cyan";
    //   triviaBox.style.display = "block";
    // }

    // Animar modelo
    function showModel(country) {
      const model = document.getElementById(`entity-${country}`);
      if (!model) return;

      const isVisible = model.getAttribute("visible");
      model.setAttribute("visible", !isVisible);
      if (!isVisible) {
        model.setAttribute("animation", {
          property: "rotation",
          to: "0 360 0",
          loop: true,
          dur: 4000,
          easing: "linear"
        });
      } else {
        model.removeAttribute("animation");
      }
    }

    // Trivia
    function startTrivia(country) {
      const trivia = countryData[country].trivia;
      if (!trivia) return;

      triviaActive = true;
      triviaBox.style.display = "block";
      statsBox.style.display = "none";
      triviaQuestion.textContent = trivia.question;
      triviaResult.textContent = "";

      // Cambiar botones a opciones
      mainButtons.forEach((btn, i) => {
        if (trivia.options[i]) {
          btn.style.display = "inline-block";
          btn.textContent = trivia.options[i];
          btn.onclick = () => checkAnswer(trivia.options[i], trivia.answer);
        } else {
          btn.style.display = "none";
        }
      });
    }

    function checkAnswer(ans, correct) {
      if (ans === correct) {
        triviaResult.textContent = "✅ Correcto!";
        triviaResult.style.color = "lightgreen";
      } else {
        triviaResult.textContent = "❌ Incorrecto";
        triviaResult.style.color = "red";
      }

      setTimeout(() => resetButtons(), 500);
    }

    // LÓGICA PARA BOTONES
    const mainButtonsLogic = [
      () => { if (currentCountry) showStats(currentCountry); },
      () => { if (currentCountry) showVideo(currentCountry); },
      () => { if (currentCountry) startTrivia(currentCountry); },
      () => { if (currentCountry) showModel(currentCountry); }
    ];

    function initARLogic() {
      const targets = document.querySelectorAll("[mindar-image-target]");

      targets.forEach(target => {
        const country = target.dataset.country;
        const video = document.getElementById(`video-${country}`);
        const plane = document.getElementById(`plane-${country}`);
        const model = document.getElementById(`entity-${country}`);

        target.addEventListener("targetFound", () => {
          console.log("🎯 Detectado:", country);
          currentCountry = country;

          model.setAttribute("visible", "true");
          buttonsPanel.style.display = "flex";
          resetButtons();
        });

        target.addEventListener("targetLost", () => {
          console.log("❌ Perdido:", country);
          currentCountry = null;

          model.setAttribute("visible", "false");
          plane.setAttribute("visible", "false");
          video.pause();

          buttonsPanel.style.display = "none";
          statsBox.style.display = "none";
          triviaBox.style.display = "none";
        });
      });
    }

    startBtn.addEventListener("click", () => {
      intro.style.display = "none";
      arContainer.classList.add("active");

      arContainer.innerHTML = `
        <a-scene mindar-image="imageTargetSrc: assets/targets/targets.mind; autoStart: true;" 
                color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights"
                vr-mode-ui="enabled: false"
                device-orientation-permission-ui="enabled: false">
          
          <a-assets>
            <!-- VIDEOS -->
            <video id="video-argentina" src="assets/videos/argentina.mp4" loop crossorigin="anonymous"webkit-playsinline playsinline muted ></video>
            <video id="video-brasil" src="assets/videos/brasil.mp4" loop crossorigin="anonymous" webkit-playsinline playsinline muted ></video>
            <video id="video-mexico" src="assets/videos/mexico.mp4" loop crossorigin="anonymous"webkit-playsinline playsinline muted ></video>
            <video id="video-usa" src="assets/videos/usa.mp4" loop crossorigin="anonymous" webkit-playsinline playsinline muted ></video>

            <!--MODELOS-->
            <a-asset-item id="model-brasil" src="assets/modelos/brasilao/cristeredenter.glb"></a-asset-item>
            <a-asset-item id="model-argentina" src="assets/modelos/mate/scene.gltf"></a-asset-item>
            <a-asset-item id="model-mexico" src="assets/modelos/mexico/scene.glb"></a-asset-item>
            <a-asset-item id="model-usa" src="assets/modelos/eagle.glb"></a-asset-item>

          </a-assets>

          <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

          <!-- Targets -->
          <a-entity mindar-image-target="targetIndex: 0" data-country="mexico">
            <a-video id="plane-mexico" src="#video-mexico" width="0.5" height="0.35" position="0 -0.4 0" visible="false"></a-video>
            <a-entity id="entity-mexico" gltf-model="#model-mexico" scale="0.1 0.1 0.1" position="0 0.3 0" visible="false"></a-entity>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 1" data-country="usa">
            <a-video id="plane-usa" src="#video-usa" width="0.7" height="0.55" position="0 -0.4 0" visible="false"></a-video>
            <a-entity id="entity-usa" gltf-model="#model-usa" scale="0.1 0.1 0.1" position="0 0.3 0" visible="false"></a-entity>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 2" data-country="pop">
            <a-video id="videoPlane" src="#" width="1.6" height="0.9" position="0 0 0" visible="false"></a-video>
            <a-gltf-model id="modelEntity" src="#model2" rotation="0 0 0 " position="0 0 0.1" scale="0.005 0.005 0.005"
            visible="false"></a-gltf-model>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 3" data-country="brasil">
            <a-video id="plane-brasil" src="#video-brasil" width="0.7" height="0.55" position="0 -0.4 0" visible="false"></a-video>
            <a-entity id="entity-brasil" gltf-model="#model-brasil" scale="0.01 0.01 0.01" position="0 0.3 0" visible="false"></a-entity>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 4" data-country="ja">
            <a-video id="videoPlane" src="#" width="1.6" height="0.9" position="0 0 0" visible="false"></a-video>
            <a-gltf-model id="modelEntity" src="#model1" rotation="0 0 0 " position="0 0 0.1" scale="0.005 0.005 0.005"
            visible="false"></a-gltf-model>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 5" data-country="ira">
            <a-video id="videoPlane" src="#" width="1.6" height="0.9" position="0 0 0" visible="false"></a-video>
            <a-gltf-model id="modelEntity" src="#model1" rotation="0 0 0 " position="0 0 0.1" scale="0.005 0.005 0.005"
            visible="false"></a-gltf-model>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 6" data-country="argentina">
            <a-video id="plane-argentina" src="#video-argentina" width="0.7" height="0.55" position="0 -0.4 0" visible="false"></a-video>
            <a-entity id="entity-argentina" gltf-model="#model-argentina" scale="8.0 8.0 8.0" position="0 0.3 0" visible="false"></a-entity>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 7" data-country="canada">
            <a-video id="plane-canada" src="video-canada" width="1.6" height="0.9" position="0 0 0" visible="false"></a-video>
            <a-entity id="entity-canada" gltf-model="#model-canada" scale="1.0 1.0 1.0" position="0 -0.5 0" visible="false"></a-entity>
        </a-entity>
          
          <a-entity mindar-image-target="targetIndex: 8" data-country="aus">
            <a-video id="videoPlane" src="#" width="1.6" height="0.9" position="0 0 0" visible="false"></a-video>
            <a-gltf-model id="modelEntity" src="#model1" rotation="0 0 0 " position="0 0 0.1" scale="0.005 0.005 0.005"
            visible="false"></a-gltf-model>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 9" data-country="nz">
            <a-video id="videoPlane" src="#" width="1.6" height="0.9" position="0 0 0" visible="false"></a-video>
            <a-gltf-model id="modelEntity" src="#model1" rotation="0 0 0 " position="0 0 0.1" scale="0.005 0.005 0.005"
            visible="false"></a-gltf-model>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 10" data-country="can">
            <a-video id="videoPlane" src="#" width="1.6" height="0.9" position="0 0 0" visible="false"></a-video>
            <a-gltf-model id="modelEntity" src="#model1" rotation="0 0 0 " position="0 0 0.1" scale="0.005 0.005 0.005"
            visible="false"></a-gltf-model>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 11" data-country="uzbe">
            <a-video id="videoPlane" src="#" width="1.6" height="0.9" position="0 0 0" visible="false"></a-video>
            <a-gltf-model id="modelEntity" src="#model1" rotation="0 0 0 " position="0 0 0.1" scale="0.005 0.005 0.005"
            visible="false"></a-gltf-model>
          </a-entity>

          <a-entity mindar-image-target="targetIndex: 12" data-country="coreasur">
            <a-video id="plane-" src="video-" width="1.6" height="0.9" position="0 0 0" visible="false"></a-video>
            <a-entity id="entity-" gltf-model="#model-" scale="1.0 1.0 1.0" position="0 -0.5 0" visible="false"></a-entity>
        </a-entity>
        </a-scene>
      `;

      setTimeout(() => {
        window.dispatchEvent(new Event("resize"));
      }, 300);

      initARLogic();
      resetButtons();

    });

  </script>

</html>



